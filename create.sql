create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col integer not null, floor integer not null, id integer not null auto_increment, row integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_a4pwxwlbn2kbemdqte4pvrckm unique (drop_station);
alter table booking add constraint UK_3x3vc730mabgex565og02bsin unique (pick_station);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, schedule_id integer, ticket_number integer not null, transaction_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FKdkador5s62nuvhdf672u65fs9 foreign key (schedule_id) references schedule (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method enum ('BANKING','MOMO','VNPAY') not null, status enum ('FAILURE','SUCCESS') not null, transaction_type enum ('PAYMENT','REFUND') not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table ticket add constraint UK_49ak3qc0waj94n31ontqyg69 unique (bill_code);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_code integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKqewmk5amgdxik71s85se7kn2 foreign key (bill_code) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, ticket_price integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, ticket_price integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, ticket_price integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, ticket_price integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, ticket_price integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, ticket_price integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, ticket_price integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, ticket_price integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
create table account (id integer not null auto_increment, is_active bit not null, role_id integer, password varchar(255) not null, refresh_token varchar(255), username varchar(255) not null, primary key (id)) engine=InnoDB;
create table admin (admin_id integer not null auto_increment, staff_id integer, primary key (admin_id)) engine=InnoDB;
create table bill (id integer not null auto_increment, refer_code varchar(255), primary key (id)) engine=InnoDB;
create table booking (booking_user_id integer, conduct_staff_id integer, drop_station integer, is_ticketing bit not null, pick_station integer, ticket_number integer not null, transaction_id integer, trip_id integer, code varchar(7) not null, booking_date datetime(6) not null, email varchar(45) not null, status varchar(45) not null, tel varchar(45) not null, name varchar(255), primary key (code)) engine=InnoDB;
create table bus (current_position integer, driver_id integer, id integer not null auto_increment, manufacture_year integer not null, route_id integer, state_id integer, type_id integer, availability varchar(255), color varchar(255), license_plate varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_quality (id integer not null auto_increment, update_at date not null, air_condition varchar(255) not null, brake varchar(255) not null, electric varchar(255) not null, fuel varchar(255) not null, lighting varchar(255) not null, mirror varchar(255) not null, overall_state varchar(255) not null, steering varchar(255) not null, tire varchar(255) not null, primary key (id)) engine=InnoDB;
create table bus_type (capacity integer, fee integer, id integer not null auto_increment, seatmap_id integer, description varchar(255), name varchar(255), primary key (id)) engine=InnoDB;
create table customer (customer_id integer not null auto_increment, user_id integer, img varchar(255), primary key (customer_id)) engine=InnoDB;
create table driver (driver_id integer not null auto_increment, user_id integer, begin_work_date datetime(6), issue_date datetime(6) not null, id_card varchar(15) not null, license_number varchar(20) not null, address varchar(200) not null, img varchar(255), primary key (driver_id)) engine=InnoDB;
create table history (conduct_staff_id integer, id integer not null auto_increment, policy_id integer, ticket_id integer, transaction_id integer, timestamp datetime(6) not null, action enum ('CANCEL','CHANGE') not null, primary key (id)) engine=InnoDB;
create table location (id integer not null auto_increment, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table policy (id integer not null auto_increment, number_required integer not null, refund_rate integer not null, time_required integer not null, action varchar(255) not null, primary key (id)) engine=InnoDB;
create table review (id integer not null auto_increment, rate integer not null, reviewer_id integer, schedule_id integer, send_date datetime(6), comment varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table role (id integer not null auto_increment, role_name varchar(255) not null, primary key (id)) engine=InnoDB;
create table route (bus_type_id integer, departure integer, destination integer, distance integer not null, hours float(23), id integer not null auto_increment, parents integer, price integer not null, schedule varchar(250), primary key (id)) engine=InnoDB;
create table schedule (availability integer, bus_id integer, depart_date date not null, depart_time time(6) not null, finish_time time(6) not null, id integer not null auto_increment, special_day_id integer, ticket_price integer not null, trip_id integer, note varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat (col_id integer not null, floor_id integer not null, id integer not null auto_increment, row_id integer not null, seatmap_id integer, name varchar(45) not null, primary key (id)) engine=InnoDB;
create table seat_map (col_no integer not null, floor_no integer not null, id integer not null auto_increment, row_no integer not null, primary key (id)) engine=InnoDB;
create table special_day (date date not null, fee integer not null, id integer not null auto_increment, primary key (id)) engine=InnoDB;
create table staff (begin_work_date date, staff_id integer not null auto_increment, user_id integer, id_card varchar(15), address varchar(200), img varchar(255), primary key (staff_id)) engine=InnoDB;
create table station (id integer not null auto_increment, latitude decimal(10,8), location_id integer, longitude decimal(11,8), name varchar(45) not null, address varchar(255) not null, primary key (id)) engine=InnoDB;
create table stop_station (arrival_time float(23), id integer not null auto_increment, reduce_fee integer, station_id integer, trip_id integer, station_type varchar(255), primary key (id)) engine=InnoDB;
create table ticket (bill_id integer, checked_in bit not null, id integer not null auto_increment, schedule_id integer, ticket_price integer, booking_code varchar(7), seat varchar(45) not null, state varchar(255) not null, primary key (id)) engine=InnoDB;
create table transaction (amount float(53) not null, id integer not null auto_increment, payment_time datetime(6) not null, reference_id varchar(20) not null, payment_method varchar(255) not null, transaction_type varchar(255) not null, primary key (id)) engine=InnoDB;
create table trip (end_station integer, id integer not null auto_increment, route_id integer, start_station integer, turn bit, primary key (id)) engine=InnoDB;
create table user (account_id integer, gender bit, id integer not null auto_increment, tel varchar(12) not null, email varchar(45), name varchar(45) not null, primary key (id)) engine=InnoDB;
alter table account add constraint UK_gex1lmaqpg0ir5g1f5eftyaa1 unique (username);
alter table admin add constraint UK_b9v7hm28yi9p62lbe1497ell7 unique (staff_id);
alter table booking add constraint UK_qb4wlileescdojk32x9qebrjc unique (transaction_id);
alter table bus add constraint UK_n8vosak7y2q2g2pf3gl0o5cvk unique (driver_id);
alter table bus add constraint UK_eufogh6i6sop1npxoho37ncbe unique (state_id);
alter table bus_type add constraint UK_lk5jd2xt4w731pppyfgrwx36x unique (seatmap_id);
alter table customer add constraint UK_j7ja2xvrxudhvssosd4nu1o92 unique (user_id);
alter table driver add constraint UK_g3oju5uudgl1cct873m6f2bfy unique (user_id);
alter table driver add constraint UK_83rhth06evmv49g4liabxacc2 unique (id_card);
alter table driver add constraint UK_9yq25nknyh5y5gihylet1ypy9 unique (license_number);
alter table history add constraint UK_2k7p1072eyyvycnio28xsqvf9 unique (transaction_id);
alter table staff add constraint UK_7qatq4kob2sr6rlp44khhj53g unique (user_id);
alter table staff add constraint UK_n6hdm35gyfk1jrmelnqtgp7q1 unique (id_card);
alter table user add constraint UK_nrrhhb0bsexvi8ch6wnon9uog unique (account_id);
alter table user add constraint UK_nbfia2ok6c7at4i0er6uyskkx unique (tel);
alter table account add constraint FKd4vb66o896tay3yy52oqxr9w0 foreign key (role_id) references role (id);
alter table admin add constraint FKpfjyosx85te798iryn7m6cw1u foreign key (staff_id) references staff (staff_id);
alter table booking add constraint FK81p15i3m6sq98wnog6dyuygxc foreign key (booking_user_id) references user (id);
alter table booking add constraint FKjjrugfvtfq4dwf7npgj5c80a8 foreign key (conduct_staff_id) references staff (staff_id);
alter table booking add constraint FKerce2395050fsisr39jeuu0at foreign key (drop_station) references stop_station (id);
alter table booking add constraint FKklv1yj5xnmnxix57eptr1p038 foreign key (pick_station) references stop_station (id);
alter table booking add constraint FK5ify3pjpncs24hq6yexr3tugf foreign key (transaction_id) references transaction (id);
alter table booking add constraint FKkp5ujmgvd2pmsehwpu2vyjkwb foreign key (trip_id) references trip (id);
alter table bus add constraint FKgpr1wf92tmtevl3cb3jryg9e foreign key (current_position) references location (id);
alter table bus add constraint FKdybo98296m92dxlbqlt5ia6wh foreign key (driver_id) references driver (driver_id);
alter table bus add constraint FKmrkjerbucw6j8sy8xewrig9wj foreign key (route_id) references route (id);
alter table bus add constraint FKsrcsdbesvw85ool30y1jxthjo foreign key (state_id) references bus_quality (id);
alter table bus add constraint FKajrtrtb3907na3inrdd4e2hm6 foreign key (type_id) references bus_type (id);
alter table bus_type add constraint FKeidjcxjck2oefj001gdfa1p6w foreign key (seatmap_id) references seat_map (id);
alter table customer add constraint FKj8dlm21j202cadsbfkoem0s58 foreign key (user_id) references user (id);
alter table driver add constraint FKkux9gqt7e9mh4rd4oo4i5ov0f foreign key (user_id) references user (id);
alter table history add constraint FKnbinb4y5grr0q23jb0ncnmj30 foreign key (conduct_staff_id) references staff (staff_id);
alter table history add constraint FKngnerpp7ve3oehbxqaf8grxju foreign key (policy_id) references policy (id);
alter table history add constraint FKjwi92n01fb8qq489ln1qpsd62 foreign key (ticket_id) references ticket (id);
alter table history add constraint FKrewni415li435xlgoorwmveb0 foreign key (transaction_id) references transaction (id);
alter table review add constraint FKt58e9mdgxpl7j90ketlaosmx4 foreign key (reviewer_id) references user (id);
alter table review add constraint FK782ghumk9ybsqm46ygkfab5p9 foreign key (schedule_id) references schedule (id);
alter table route add constraint FKarop7dhnaa2oqq9mw0basrene foreign key (bus_type_id) references bus_type (id);
alter table route add constraint FK6dehqee3my0e1od55x7thmn7w foreign key (departure) references location (id);
alter table route add constraint FKp23usym48llu9imd6e8uy5ew9 foreign key (destination) references location (id);
alter table schedule add constraint FKk6v9b839hg5skqdiuwd0nyw8x foreign key (bus_id) references bus (id);
alter table schedule add constraint FKgl8nsr9ti0siey2cae9qlykv foreign key (special_day_id) references special_day (id);
alter table schedule add constraint FKhk20mlu1gcwrnrxxkj23qhr0n foreign key (trip_id) references trip (id);
alter table seat add constraint FK51m8rpr29qxwxlk99drkafcsf foreign key (seatmap_id) references seat_map (id);
alter table staff add constraint FKbhogfndgswrqk696i1s2stk2g foreign key (user_id) references user (id);
alter table station add constraint FKqlnvqs4wbjtf02m0wghvreewo foreign key (location_id) references location (id);
alter table stop_station add constraint FKds4vmk7534582fgwcuxx7thsb foreign key (station_id) references station (id);
alter table stop_station add constraint FKfom1acwovya5ikkrkoj2foc06 foreign key (trip_id) references trip (id);
alter table ticket add constraint FKf9rrxu78kmw44u3xfarqpaa2r foreign key (bill_id) references bill (id);
alter table ticket add constraint FK8bai57e8m61hh8ri9movc2leo foreign key (booking_code) references booking (code);
alter table ticket add constraint FKdmmaqgvu0kjjlpsivmgnvurl5 foreign key (schedule_id) references schedule (id);
alter table trip add constraint FKe8se5tjehamumdh5b9504ybe8 foreign key (end_station) references station (id);
alter table trip add constraint FKeva4adpyk6glllffnw5ypj20j foreign key (route_id) references route (id);
alter table trip add constraint FK959242365j9j9ry5upw7xvupj foreign key (start_station) references station (id);
alter table user add constraint FKc3b4xfbq6rbkkrddsdum8t5f0 foreign key (account_id) references account (id);
